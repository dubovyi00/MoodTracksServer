# Описание
REST API для приложения Mood Tracks

# Требования
* Flask>=2.x

# Запуск
* python3 main.py

# Спецификация
## HTTP-коды ответов
* 200 - успешный запрос
* 400 - ошибка в параметрах запроса
* 401 - пользователь не авторизован в системе
* 404 - ресурс по такому адресу отсутствует

## Внутренние коды ошибок
* 1 - параметры не указаны
* 2 - неверные/невалидные параметры
* 3 - объект не существует

## Используемые JSON-объекты
Объект типа ERROR 
* при успешном выполнении запроса возвращается в виде null
* при возникновении ошибки, возвращается объект с полями
    + code - внутренний численный код ошибки (id)
    + message - текстовое описание ошибки (string?)

Объект типа DATA
* при успешном выполнении запроса возвращается объект, данные в котором зависят от запроса
* при возникновении ошибки возвращается в виде null

Ответ на каждый запрос всегда включает в себя два объекта - ERROR и DATA

## Работа с плейлистами
Получение списка плейлистов
* URL: http://127.0.0.1:5000/api/playlist
* Метод: GET 
* Формат ответа: application/json
* Параметры запроса отсутствуют
* Токен передаётся в заголовке запроса Token
* Тело объекта DATA:
    + playlists - список плейлистов (list)
        * id - идентификатор плейлиста (longint)
        * name - название плейлиста (string)
        * image_url - ссылка на обложку плейлиста (string)

Сохранение плейлиста
* URL: http://127.0.0.1:5000/api/playlist
* Метод: POST 
* Формат ответа: application/json
* Параметры запроса:
    + key - наименование ключа для создания плейлиста (string)
    + data - значение ключа для создания плейлиста (string)
* Токен передаётся в заголовке запроса Token
* Тело объекта DATA:
    + id - идентификатор созданного плейлиста

Получение плейлиста
* URL: http://127.0.0.1:5000/api/playlist/<int:id>
* Метод: GET
* Формат ответа: application/json
* Параметры запроса:
    + id - идентификатор плейлиста
* Тело объекта DATA:
    + name - название плейлиста (string)
    + tracks - список треков (list)
        * album_id - идентификатор альбома в Яндекс.Музыке (longint)
        * track_id - идентификатор трека в Яндекс.Музыке (longint)
        * artist - название исполнителя (string)
        * album - название альбома (string)
        * title - название трека (string)
        * duration - время воспроизведения (в секундах) (int)
        * image_url - обложка трека (берётся обложка альбома) (string)
        
Удаление плейлиста
* URL: http://127.0.0.1:5000/api/playlist/<int:id>
* Метод: DELETE
* Формат ответа: application/json
* Параметры запроса отсутствуют
* Объект DATA пуст

## Работа с треками
Получение MP3-трека
* URL: http://127.0.0.1:5000/api/track/<int:album_id>/<int:track_id>
* Метод: GET
* Формат ответа: audio/mpeg (в случае успешного запроса) или application/json (в случае ошибки) 
* Параметры запроса:
    + album_id - идентификатор альбома
    + track_id - идентификатор трека

## Работа со временем суток
Получение времени суток
* URL: http://127.0.0.1:5000/api/timeclock
* Метод: GET
* Формат ответа: application/json
* Параметры запроса:
    + time - метка текущего времени в численном формате (часовой пояс - UTC)
    + tz - сдвиг часового пояса (в формате "ччмм")
* Тело ответа:
    + status - текстовое обозначение статуса выполнения
    + timeclock - текстовое обозначение времени суток